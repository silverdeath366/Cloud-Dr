# Example Secrets Configuration
# DO NOT commit actual secrets to version control
# Use external secret management (AWS Secrets Manager, Azure Key Vault, etc.)

apiVersion: v1
kind: Secret
metadata:
  name: cloudphoenix-secrets
  namespace: cloudphoenix
type: Opaque
stringData:
  # Database credentials - retrieve from AWS Secrets Manager or Azure Key Vault
  db-host: "REPLACE_WITH_SECRET"
  db-port: "5432"
  db-name: "cloudphoenix"
  db-user: "REPLACE_WITH_SECRET"
  db-password: "REPLACE_WITH_SECRET"
  
  # AWS credentials - use IAM roles for service accounts instead
  aws-access-key-id: "REPLACE_WITH_SECRET"
  aws-secret-access-key: "REPLACE_WITH_SECRET"
  
  # Azure credentials
  azure-storage-account: "REPLACE_WITH_SECRET"
  azure-storage-key: "REPLACE_WITH_SECRET"

---
# External Secrets Operator - AWS Secrets Manager
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: cloudphoenix-aws-secrets
  namespace: cloudphoenix
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: SecretStore
  target:
    name: cloudphoenix-secrets
    creationPolicy: Owner
  data:
  - secretKey: db-password
    remoteRef:
      key: cloudphoenix-rds-password
  - secretKey: aws-access-key-id
    remoteRef:
      key: cloudphoenix-aws-access-key
  - secretKey: aws-secret-access-key
    remoteRef:
      key: cloudphoenix-aws-secret-key

---
# External Secrets Operator - Azure Key Vault
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: cloudphoenix-azure-secrets
  namespace: cloudphoenix
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: azure-key-vault
    kind: SecretStore
  target:
    name: cloudphoenix-azure-secrets
    creationPolicy: Owner
  data:
  - secretKey: azure-storage-account
    remoteRef:
      key: cloudphoenix-storage-account
  - secretKey: azure-storage-key
    remoteRef:
      key: cloudphoenix-storage-key

